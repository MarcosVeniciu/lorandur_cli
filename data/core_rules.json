{
  "pack_id": "core_rules_v4_1",
  "name": "Lorandur Core Ruleset",
  "version": "4.1",
  "description": "Regras base para arquitetura unificada (Pipeline + Arbiter + ANPA).",
  "world_data": {
    "description": "Regras universais e tabelas geradoras agnósticas.",
    
    "rules": [
      {
        "rule_id": "RULE_SETUP_ADVENTURE",
        "category": "TYPE_I_CONSTRUCTION",
        "description": "Pipeline de Criação de Campanha (Dominus Standard).",
        "status": { "trigger_event": "ON_CAMPAIGN_START" },
        "construction_policy": {
          "method": "PIPELINE_CHAIN",
          "steps": [
            {
              "step_id": "1_ROLL_SEEDS",
              "action": "RNG_TABLE_LOOKUP",
              "target_table": "plot",
              "required_columns": ["col1_event", "col2_goal", "col3_consequence"],
              "output_var": "raw_plot_seed"
            },
            {
              "step_id": "2_REFINE_NARRATIVE",
              "action": "LLM_AGENT_CALL",
              "agent_role": "PlotRefiner",
              "input_context": ["{{raw_plot_seed}}", "SCENARIO_CONTEXT"],
              "output_var": "refined_plot"
            },
            {
              "step_id": "3_BUILD_MECHANICS",
              "action": "LLM_AGENT_CALL",
              "agent_role": "FrontBuilder",
              "input_context": ["{{refined_plot}}"],
              "output_var": "adventure_front"
            }
          ],
          "final_output_destination": "$.state.campaign_front"
        }
      },
      {
        "rule_id": "RULE_CONSTRUCTION_GENERIC",
        "category": "TYPE_I_CONSTRUCTION",
        "description": "Sistema de Crafting Universal.",
        "status": { "trigger_event": "ON_CRAFT_REQUEST" },
        "construction_policy": {
          "method": "PIPELINE_CHAIN",
          "steps": [
            {
              "step_id": "1_VALIDATE_AND_BUILD",
              "action": "LLM_AGENT_CALL",
              "agent_role": "ItemCrafter",
              "input_context": ["{{intent}}", "{{inventory}}"],
              "output_var": "craft_result"
            }
          ],
          "final_output_destination": "RETURN_DIRECTLY"
        }
      },
      {
        "rule_id": "RULE_COMBAT_ATTACK",
        "category": "TYPE_X_MECHANIC",
        "description": "Ação ofensiva para causar dano.",
        "modifiers": {
          "advantage_criteria": ["Arma Superior", "Surpresa", "Inimigo Caído", "Habilidade de Combate"],
          "disadvantage_criteria": ["Desarmado", "Ferido Gravemente", "Escuridão", "Inimigo Protegido"]
        }
      },
      {
        "rule_id": "RULE_CHECK_SKILL",
        "category": "TYPE_X_MECHANIC",
        "description": "Teste de perícia geral (investigar, hackear, convencer).",
        "modifiers": {
          "advantage_criteria": ["Ferramenta Adequada", "Conhecimento Prévio", "Ajuda de Aliado", "Especialização"],
          "disadvantage_criteria": ["Sem Ferramentas", "Pressa", "Distração", "Ambiente Hostil"]
        }
      }
    ],

    "tables": {
      "plot": {
        "col1_event": [
          "Alguém desapareceu",
          "Um item foi roubado",
          "Um assassinato ocorreu",
          "Uma mensagem chegou",
          "Um segredo foi revelado",
          "Uma nave caiu"
        ],
        "col2_goal": [
          "Capturar o culpado",
          "Recuperar o objeto",
          "Salvar a vítima",
          "Escapar do local",
          "Destruir a ameaça",
          "Descobrir a verdade"
        ],
        "col3_consequence": [
          "Uma guerra começa",
          "O vilão escapa",
          "Todos morrem",
          "A cidade é destruída",
          "A infecção se espalha",
          "O tempo acaba"
        ]
      },
      "scenes": {
        "places": [
          "Ruínas Antigas",
          "Base Militar",
          "Mercado Negro",
          "Laboratório Abandonado",
          "Taverna Suja",
          "Floresta Densa",
          "Nave Espacial",
          "Esgotos da Cidade"
        ],
        "events": [
          "Emboscada",
          "Armadilha",
          "Descoberta Macabra",
          "Encontro com Mercador",
          "Fenômeno Estranho",
          "Sinal de Rádio"
        ],
        "chars": [
          "Um velho sábio",
          "Um soldado ferido",
          "Um ladrão furtivo",
          "Um robô defeituoso",
          "Uma criatura selvagem",
          "Um cientista louco"
        ]
      }
    }
  }
}