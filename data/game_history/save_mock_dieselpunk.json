{
  "meta": {
    "version": "4.1",
    "campaign_id": "mock-diesel-001",
    "scenario_name": "Dieselpunk: Estrada da Fúria",
    "turn_count": 18,
    "last_save": "2025-10-27T10:00:00"
  },
  "temp": {
    "current_action_dice": "1d6",
    "context_tags": [
      "DESERT",
      "ON_VEHICLE"
    ]
  },
  "system_config": {
    "path_mapping": {
      "LAST_ROLL": "$.state.system.last_roll_result",
      "OUTCOME_FLAG": "$.state.system.challenge_outcome",
      "ORACLE_ROLL": "$.state.system.current_oracle_roll",
      "CURRENT_DICE_FORMULA": "$.temp.current_action_dice",
      "CHAR_HP": "$.state.character.vitals.hp",
      "CAR_HP": "$.state.packages.scenario_dieselpunk.vehicle.structure",
      "FUEL_RES": "$.state.packages.scenario_dieselpunk.resources.fuel",
      "WATER_RES": "$.state.packages.scenario_dieselpunk.resources.water",
      "THIRSTY_FLAG": "$.state.packages.scenario_dieselpunk.flags.is_thirsty"
    }
  },
  "world_data": {
    "tables": {
      "plot": {
        "col1_event": [
          "As estradas estão perigosas",
          "Reservas sabotadas",
          "Tremor revelou recursos",
          "Corrida anual",
          "Água acabou",
          "Profecia antiga"
        ],
        "col2_goal": [
          "Juntar recursos",
          "Unir sobreviventes",
          "Viajar para Refúgio",
          "Provar habilidade",
          "Recuperar evidências",
          "Atravessar deserto"
        ],
        "col3_consequence": [
          "Preso pelo chefe",
          "Exilado",
          "Carro vira sucata",
          "Responsabilizado",
          "Morrer sem combustível",
          "Pessoas sofrem"
        ]
      },
      "archetypes": [
        "Músculo",
        "Cabeça",
        "Volante",
        "Vigia",
        "Boca",
        "Novato"
      ],
      "scenes": {
        "places": [
          "Arena/Ferro-velho",
          "Fila da ração",
          "Mercado de pulgas",
          "Mansão/Festival",
          "Torre/Pista",
          "Oficina/Lab"
        ],
        "chars": [
          "Chefão regional",
          "Oráculo eremita",
          "Bandidos",
          "Sobrevivente solitário",
          "Grupo de famintos",
          "Sábio recluso"
        ],
        "events": [
          "Tiroteio começa",
          "Acidente na estrada",
          "Conversa sincera",
          "Sombra do passado",
          "Emboscada feral",
          "Convite para corrida"
        ]
      },
      "ideas": {
        "subjects": [
          "Não tem jeito",
          "Pelo bem da Tribo",
          "Na feira tem",
          "Ondas de calor",
          "Anarquia ou morte",
          "Estrada sem fim"
        ],
        "actions": [
          "Rachar",
          "Correr",
          "Sabotar",
          "Negociar",
          "Armar",
          "Obstruir"
        ],
        "things": [
          "Galão combustível",
          "Metralhadora",
          "Instrumento",
          "Muda de planta",
          "Analgésicos",
          "Sucatas"
        ],
        "qualities": [
          "Resistente",
          "Personalizado",
          "Agressivo",
          "Oculto",
          "Frágil",
          "Arruinado"
        ]
      },
      "extra_dieselpunk": {
        "cars": [
          "Gurgel Monstro",
          "Maverick Camuflado",
          "Camaro Amarelo",
          "Belina Envenenada",
          "Trailer Reforçado",
          "Harley Sucata"
        ],
        "scrap": [
          "Ferro/Alumínio",
          "Cobre/Eletrônico",
          "Madeira/Natural",
          "Explosivos/Munição",
          "Armas/Lâminas",
          "Alimento/Remédios"
        ]
      }
    },
    "rules": [
      {
        "rule_id": "RULE_DOMINUS_CHALLENGE",
        "category": "TYPE_F_PROCEDURAL_GEN",
        "status": {
          "trigger_event": "ON_CHALLENGE_ROLL"
        },
        "mechanic_enforcement": {
          "rng_action": {
            "roll_formula": "{{CURRENT_DICE_FORMULA}}",
            "output_destination": {
              "inject_as": "{{LAST_ROLL}}"
            }
          },
          "state_check": {
            "target_value": "{{LAST_ROLL}}",
            "condition": "GREATER_THAN_OR_EQUAL",
            "threshold_value": 4,
            "on_true": {
              "set_value": [
                {
                  "key": "{{OUTCOME_FLAG}}",
                  "value": "SUCCESS"
                }
              ]
            },
            "on_false": {
              "set_value": [
                {
                  "key": "{{OUTCOME_FLAG}}",
                  "value": "FAIL"
                }
              ]
            }
          }
        },
        "narrative_injections": [
          {
            "conditions": {
              "check_type": "VALUE_MATCH",
              "target": "{{OUTCOME_FLAG}}",
              "value": "SUCCESS"
            },
            "text": "SISTEMA: Sucesso (4+)."
          },
          {
            "conditions": {
              "check_type": "VALUE_MATCH",
              "target": "{{OUTCOME_FLAG}}",
              "value": "FAIL"
            },
            "text": "SISTEMA: Falha (3-)."
          }
        ]
      },
      {
        "rule_id": "RULE_DIESEL_THIRST",
        "category": "TYPE_A_STATE_CHECKER",
        "description": "Regra X: Consumo de Água ao passar do tempo.",
        "status": {
          "trigger_event": "ON_TIME_PASS"
        },
        "mechanic_enforcement": {
          "operation": {
            "target_path": "{{WATER_RES}}",
            "action": "DECREMENT",
            "value_formula": "1"
          },
          "state_check": {
            "target_value": "{{WATER_RES}}",
            "condition": "LESS_THAN_OR_EQUAL",
            "threshold_value": 0,
            "on_true": {
              "set_value": [
                {
                  "key": "{{THIRSTY_FLAG}}",
                  "value": true
                }
              ]
            },
            "on_false": {
              "set_value": [
                {
                  "key": "{{THIRSTY_FLAG}}",
                  "value": false
                }
              ]
            }
          }
        },
        "narrative_injections": [
          {
            "conditions": {
              "check_type": "VALUE_MATCH",
              "target": "{{THIRSTY_FLAG}}",
              "value": true
            },
            "text": "ALERTA DE SISTEMA [Regra X]: Água Esgotada! O personagem está desidratado. Testes físicos sofrem DESVANTAGEM até beber água."
          }
        ]
      }
    ]
  },
  "state": {
    "system": {
      "last_roll_result": 4,
      "challenge_outcome": "SUCCESS",
      "current_oracle_roll": 0,
      "scene_counter": 3
    },
    "current_scene_context": {
      "location_name": "Estrada da Fúria - Km 66",
      "scene_objective": "Escapar da emboscada dos Abutres",
      "npc_active": {
        "name": "Rictus",
        "archetype": "Líder dos Saqueadores",
        "mood": "Furioso"
      },
      "hidden_info": "O carro de Rictus está vazando óleo (Ponto Fraco).",
      "anpa_triggers": [
        "SE O JOGADOR ATACAR -> COMBAT_START",
        "SE O JOGADOR FUGIR COM O CARRO -> CHASE_START",
        "SE O JOGADOR NEGOCIAR COMBUSTÍVEL -> NEGOTIATION_START"
      ],
      "wildcard_tag": "SCENE_COMPLETE_GENERIC"
    },
    "character": {
      "name": "Max",
      "archetype": "Volante",
      "vitals": {
        "hp": 6,
        "max_hp": 10
      },
      "inventory": [
        {
          "item": "Chave Inglesa",
          "type": "tool",
          "qty": 1
        },
        {
          "item": "Escopeta Serrada",
          "type": "weapon",
          "qty": 1,
          "ammo": 2
        },
        {
          "item": "Sucata de Cobre",
          "type": "resource",
          "qty": 3
        }
      ]
    },
    "packages": {
      "scenario_dieselpunk": {
        "vehicle": {
          "name": "Interceptor",
          "type": "Maverick Camuflado",
          "structure": 3,
          "max_structure": 5
        },
        "resources": {
          "fuel": 2,
          "water": 0
        },
        "flags": {
          "is_thirsty": true,
          "in_combat": false,
          "is_racing": false
        }
      }
    }
  }
}